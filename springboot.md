# フレームワーク

今回、サンプルアプリケーションを作っていく上で利用する
「Webアプリケーションフレームワーク」には、「Spring Boot」を使用します。
Spring Bootは、「JakartaEE」の規約に乗っ取ったアプリケーションのための
「フレームワーク」である「Spring Framework」に、「JakartaEEコンテナ」を
組み込んでしまい、単独で「Webアプリケーション」が「Webサーバ」として動作できるようになっています。

・・・上の説明を読んで、次から次へと聞いたことがない言葉が出てきて
悲しい気持ちになった方も多いでしょう。そうですよね、わかります。
わからんことをわからん言葉で説明されてもね・・・。
これらすべてのことを理解する必要はありません。
歴史的経緯から生じた、不必要な複雑さにまみれていますが、本質はそれほど複雑ではありません。
簡単に、現在の視点から整理してまとめてみましょう。

## Webアプリケーションフレームワークとは

### Webサーバとは

まずは、Webサーバについて説明しましょう。皆さんがブラウザでWebを見ているとき、
URLの最後が「hoge.html」のようなHTMLファイルになっている場合、それは
世界のどこかのコンピュータのどこかの場所にあるhoge.htmlファイルの中身を見ています。
URLはその「どこか」を指定するためのルールです。URLのLはLocationのL。

Webサーバは、URLで指定されたファイルを読み取って、中身をネットワーク経由で
こちらに送ってくれるプログラムのことです。
有名なところでは、Apahce HTTP ServerとかNginx(「えんじんえっくす」と読みます)とかですね。

### Webアプリケーションとは

しかし、おいてあるHTMLファイルを読むだけだとつまらないです。
そこで、ファイルの代わりにプログラムを指定できるようにしました。
そのプログラムは実行結果をHTMLの形式で出力し、Webサーバは
それをユーザーにファイルの中身を返すのと同じように返します。

これで、ユーザーは世界のどこかのコンピュータのどこかの場所にあるプログラムを実行し、
その結果を受け取ることができるようになりました。
このプログラムのことをWebアプリケーションといいます。

大事なことは、今、WebサーバとWebアプリケーションは別々のプログラムということです。
多くのユーザーがアクセスした場合、Webサーバは1つでOKですが、
Webアプリケーションはユーザーがアクセスした数だけ起動されています。
例えば、1000人が同時にそのサイトにアクセスすると、1000個のプログラムが起動します。
規模が小さいうちはこれでも大丈夫ですが、大きなサイトを作るには工夫が必要そうです。

### JakartaEEとは

さて、WebアプリケーションをJavaで作ろうとした場合について考えましょう。

Javaのプログラムを動かすJVM(Java Virtual Machine)はかなり大きいプログラムです。
仮想マシンですからね。これがアクセスしてきたユーザー分だけ起動されたらたまりません。

そこで、JavaでWebアプリケーションを作る場合には、
1つのJVMの中でWebサーバとWebアプリケーションの両方を動かすことにしました。
こういう形式でJavaのClassを作っておけば、Javaで作られたWebサーバが
それをルールに従って呼び出してくれるという仕組みを作りました。
たくさんのユーザーが同時にアクセスした場合、
JVMの中にスレッドという処理を並行して動作させる仕組みを利用します。

この規格のことをJavaEE(Java Enterprise Edition)と呼ぶことにしました。
これと区別して、通常のJava言語の仕様のことは、
JavaSE(Standard Edition)と呼ぶことにしました。

そして、Webサーバ機能を持ち、特定の形式で書かれたJavaのClassをURLに
紐付けて呼び出してくれるプログラムのことをJavaEEコンテナと呼びます。
JavaEEは後からかなりいろんな仕様をぶち込んだ大きな規格になり、
それをすべてちゃんと実装したJavaEEコンテナも、かなり大きなプログラムになりました。
有名なところではOSSのTomcat、IBMのWebSphere、最近流行の軽量タイプのQuarkusなどがあります。
ちなみに「コンテナ」という名前になってますが、いわゆるDockerに端を発する仮想化技術とは
何の関係もありません。

さて、「あれ？JakartaEEの話だったんじゃなかったっけ？
JavaEEとJakartaEEはどういう関係？」と思われたでしょう。結論から言うと、同じです。
名前がちょいちょい変わっているというだけです。

JavaEEが出来た頃のJavaは、最初に出たJavaを大幅に改善した1.2というバージョンでした。
これを「めっちゃ良くなったぜ」という気持ちを込めてJava2と呼んでいたので、
最初はこの規格はJ22EE(Java2 Enterprise Edition)と名付けられました。

しかし、Java2は1.3, 1.4とバージョンを上げていき、いつまで「Java2」なんだという
ツッコミがはいり、いつの間にか誰もJavaとしか呼ばなくなり、J2EEもJavaEEになりました。

そして、JavaEEはコミュニティに移管されることになりました。それ自体は良いことですが、
Javaを管理しているOracleから「ウチのものじゃなくなったので、Javaという名前は変えて」と
いわれ、JakartaEEに名前が変わりました。
JavaSEはそのままなので、"Edition"の意味がよくわからなくなってしまいました。

というわけで、「J2EE = JavaEE = JakartaEE」です。同じです。

ネットの参考資料を見ると、「J2EE」「JavaEE」「JakartaEE」と
書いてあるものがあり困惑するでしょうが、すべて同じ意味です。
そこから読み取れるのは「JakartaEEと書いてあるのは比較的新しく
書かれた資料なんだろうな」ぐらいなので気にしないでください。

### フレームワークとは

さて、JakartaEEのところで「特定の形式でJavaのClassを書けば、
それを呼び出してくれる」と書きました。

このように、「自分が書いたプログラムを呼び出してくれる他人のプログラム」のことを
フレームワークといいます。
逆に、「自分が書いたプログラムから呼び出す他人のプログラム」のことは
ライブラリと呼びます。
現代のプログラミングでは、他の人が書いて「使ってもいいよ」と配布されているプログラムが
多数あり、それをみんなバンバン使っているわけです。

ちなみに、「自分が書いたプログラムを呼び出してくれる他人のプログラム」のケースで、
他人のプログラムが実行の主体である場合は、自分の書いたプログラムの方を
プラグインと呼びます。やってることは似てます。
何かのルールに従ったプログラムを書いておくと呼び出してもらえるという意味では同じです。

そして、Webアプリケーションフレームワークは、Webアプリケーションを作るための
フレームワークです。様々なプログラミング言語にはそれぞれいろんなWebアプリケーション
フレームワークが存在します。

Javaの場合には、主にJakartaEEコンテナ上で動くプログラムを作るためのフレームワークを指します。
最初期から存在するStruts、これも古くからあるSpring Framework、比較的新しい
Play Frameworkなどです。
Play Frameworkが新しいといっても、比較対象がとても古いだけでかなり歴史があります。

### Spring Frameworkとは

### Spring Bootとは

## Spring Bootに関する資料



